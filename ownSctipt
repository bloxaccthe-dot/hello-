local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

-- ðŸªŸ GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "StickyBangGUI"
ScreenGui.Parent = game:GetService("CoreGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 320, 0, 180)
Frame.Position = UDim2.new(0.5, -160, 0.3, 0)
Frame.BackgroundColor3 = Color3.fromRGB(25,25,25)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Parent = ScreenGui
Frame.ClipsDescendants = true
Frame.AnchorPoint = Vector2.new(0.5,0.5)

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0,12)
UICorner.Parent = Frame

-- âœ‹ Ø³Ø­Ø¨
local dragging, dragInput, dragStart, startPos

Frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = Frame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

Frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input == dragInput then
        local delta = input.Position - dragStart
        Frame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end
end)

-- ðŸ’¬ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1,0,0,35)
TitleBar.BackgroundColor3 = Color3.fromRGB(15,15,15)
TitleBar.Parent = Frame

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1,-40,1,0)
Title.Position = UDim2.new(0,10,0,0)
Title.BackgroundTransparency = 1
Title.Text = "ðŸ”¥ Lac - By:kaljjaj ðŸ”¥"
Title.TextColor3 = Color3.fromRGB(255,255,255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

-- Ø²Ø± Ø¥ØºÙ„Ø§Ù‚
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0,30,0,30)
CloseBtn.Position = UDim2.new(1,-35,0,3)
CloseBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
CloseBtn.Text = "âœ–"
CloseBtn.TextColor3 = Color3.new(1,1,1)
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 20
CloseBtn.Parent = TitleBar

local UICorner3 = Instance.new("UICorner")
UICorner3.CornerRadius = UDim.new(0,8)
UICorner3.Parent = CloseBtn

-- Ù…Ø±Ø¨Ø¹ ÙƒØªØ§Ø¨Ø©
local TextBox = Instance.new("TextBox")
TextBox.Size = UDim2.new(1,-30,0,40)
TextBox.Position = UDim2.new(0,15,0,55)
TextBox.PlaceholderText = "Ø§ÙƒØªØ¨ Ø£ÙˆÙ„ Ø­Ø±ÙÙŠÙ† Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù‡Ø¯Ù"
TextBox.ClearTextOnFocus = false
TextBox.TextColor3 = Color3.fromRGB(255,255,255)
TextBox.BackgroundColor3 = Color3.fromRGB(40,40,40)
TextBox.Font = Enum.Font.Gotham
TextBox.TextSize = 18
TextBox.Parent = Frame

local UICorner4 = Instance.new("UICorner")
UICorner4.CornerRadius = UDim.new(0,8)
UICorner4.Parent = TextBox

-- Ø²Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„
local AttachBtn = Instance.new("TextButton")
AttachBtn.Size = UDim2.new(1,-30,0,45)
AttachBtn.Position = UDim2.new(0,15,0,110)
AttachBtn.BackgroundColor3 = Color3.fromRGB(0,150,80)
AttachBtn.Text = "ðŸš€ Bang"
AttachBtn.TextColor3 = Color3.fromRGB(255,255,255)
AttachBtn.Font = Enum.Font.GothamBold
AttachBtn.TextSize = 20
AttachBtn.Parent = Frame

local UICorner5 = Instance.new("UICorner")
UICorner5.CornerRadius = UDim.new(0,10)
UICorner5.Parent = AttachBtn

-- ðŸ” Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¨Ø§Ù†Øº
local attached = false
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local connection
local targetPlayer -- Ù†Ø®Ø²Ù† Ø§Ù„Ù‡Ø¯Ù Ù‡Ù†Ø§

local function findPlayerByNamePrefix(prefix)
    prefix = prefix:lower()
    for _, plr in pairs(Players:GetPlayers()) do
        if plr ~= player and plr.Name:lower():sub(1, #prefix) == prefix then
            return plr
        end
    end
    return nil
end

local function startBang(targetHRP, targetPlr)
    local baseDistance = 1.2
    local direction = 1
    local speed = 6
    local currentOffset = baseDistance

    -- ÙØµÙ„ Ø£ÙŠ Ø§ØªØµØ§Ù„ Ù‚Ø¯ÙŠÙ… Ù‚Ø¨Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø§ØªØµØ§Ù„ Ø¬Ø¯ÙŠØ¯
    if connection then
        connection:Disconnect()
        connection = nil
    end

    connection = RunService.RenderStepped:Connect(function(delta)  
        if not attached or not targetPlr.Character or not targetPlr.Character:FindFirstChild("HumanoidRootPart") then  
            attached = false  
            AttachBtn.Text = "ðŸš€ Bang"  
            if connection then connection:Disconnect() end  
            return  
        end  

        humanoidRootPart = player.Character and player.Character:FindFirstChild("HumanoidRootPart")  
        if not humanoidRootPart then return end  

        currentOffset = currentOffset + direction * speed * delta  
        if currentOffset > baseDistance + 0.5 then  
            direction = -1  
        elseif currentOffset < baseDistance - 0.5 then  
            direction = 1  
        end  

        local targetPos = targetHRP.Position  
        local targetLook = targetHRP.CFrame.LookVector  
        local newPos = targetPos - targetLook * currentOffset   
        humanoidRootPart.CFrame = CFrame.new(newPos, targetPos)  
    end)
end

-- âœ¨ Ø²Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„ Ù…Ø¹ Ø¯Ø¹Ù… ØªØºÙŠÙŠØ± Ø§Ù„Ù‡Ø¯Ù Ø¨Ø³Ù‡ÙˆÙ„Ø©
AttachBtn.MouseButton1Click:Connect(function()
    -- Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ attach Ø¬Ø§Ø±ÙŠØŒ Ø§ÙØµÙ„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø£ÙˆÙ„Ø§Ù‹
    if attached then
        attached = false
        targetPlayer = nil
        AttachBtn.Text = "ðŸš€ Bang"
        if connection then
            connection:Disconnect()
            connection = nil
        end
        return
    end

    local prefix = TextBox.Text
    if prefix == "" then
        warn("Ø§ÙƒØªØ¨ Ø£ÙˆÙ„ Ø­Ø±ÙÙŠÙ† Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù‡Ø¯Ù")
        return
    end

    local newTarget = findPlayerByNamePrefix(prefix)
    if not newTarget or not newTarget.Character or not newTarget.Character:FindFirstChild("HumanoidRootPart") then
        warn("Ø§Ù„Ù„Ø§Ø¹Ø¨ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ Ø£Ùˆ Ù„Ø§ ÙŠÙ…Ù„Ùƒ HumanoidRootPart")
        return
    end

    -- ÙØµÙ„ Ø£ÙŠ Ø§ØªØµØ§Ù„ Ù‚Ø¯ÙŠÙ… Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡
    if connection then
        connection:Disconnect()
        connection = nil
    end

    targetPlayer = newTarget
    attached = true
    AttachBtn.Text = "Ø¥ÙŠÙ‚Ø§Ù âŒ"
    startBang(targetPlayer.Character.HumanoidRootPart, targetPlayer)
end)

-- âœ¨ Ø§Ø³ØªÙ…Ø±Ø§Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ù…ÙˆØª Ù…Ø¹ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø§ØªØµØ§Ù„
player.CharacterAdded:Connect(function(char)
    -- ÙØµÙ„ Ø£ÙŠ Ø§ØªØµØ§Ù„ Ù‚Ø¯ÙŠÙ… ÙÙˆØ± Ù…ÙˆØª Ø§Ù„Ø´Ø®ØµÙŠØ©
    if connection then
        connection:Disconnect()
        connection = nil
    end

    character = char
    humanoidRootPart = character:WaitForChild("HumanoidRootPart")

    -- Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ attach Ù…ÙØ¹Ù„ Ù…Ø¹ Ù„Ø§Ø¹Ø¨ Ø­Ø§Ù„ÙŠØŒ Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ attach
    if attached and targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
        task.wait(1)
        startBang(targetPlayer.Character.HumanoidRootPart, targetPlayer)
    end
end)

-- Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
    if connection then
        connection:Disconnect()
        connection = nil
    end
    attached = false
    targetPlayer = nil
end)
